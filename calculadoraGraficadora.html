<!DOCTYPE html>
<html lang="en">
<head> 
    <meta name="description" content="Crea proyectos es una blabla">
    <!--Descripción del sitio-->
    <meta name="keywords" content="Crea Proyectos,aviso,privacidad">
    <!--Palabras clave-->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="css/style.css">
    <!--Conexión con hoja de estilos CSS-->
    <link rel="icon" href="img/LOGO_BLANCO.png" type="img" sizes="16x16">
    <!--Ícono del navegador-->
    <title>BiBa México | Calculadora/Graficadora</title>
    <!--Título de la página-->
    <script src="https://code.jquery.com/jquery-3.5.1.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
    <!--JQuery para el efecto de loading-->
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js"></script>
    <script src="http://cdnjs.cloudflare.com/ajax/libs/raphael/2.1.0/raphael-min.js"></script>
    <script src="http://cdnjs.cloudflare.com/ajax/libs/morris.js/0.5.1/morris.min.js"></script>
    <!--JQuery y arhivos de cloudfare para el efecto de loading-->
    <link rel="stylesheet" href="morris/morris.css">
    <script type="text/javascript" src="morris/morris.min.js"></script>
    <!--Conexión con la librería morris.js-->
    <script src="https://d3js.org/d3.v6.min.js"></script>
    <!-- IMPORTACIÓN DE LA LIBRERÍA D3.JS -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/topojson/3.0.2/topojson.min.js"></script>
    <!-- IMPORTACIÓN DE LA LIBRERÍA TOPOJSON DE CLOUDFARE -->
</head>
<body>
    <div id="navbar-container">
        <div id="navbar">
            <div id="navbarLogo">
                <a href="index.html"><img src="img/LOGO.png" alt="Logo BibaMexico" width="100%"></a>
            </div>
            <div >
                <div onclick="displayMenuMobile()" id="navbarMiniMenu">
                    <img src="img/menu.svg" alt="menuMobile" width="100%">
                </div>
                <div id="navbarMenu">
                    <a href="index.html" class="menuButton2">
                        Inicio
                    </a>
                    <a href="calculadoraGraficadora.html" id="menuButton1">
                        Calculadora/Graficadora
                    </a>
                    <a href="heatmap.html" class="menuButton2">
                        Heatmap
                    </a>
                    <a href="graficas2.html" class="menuButton2">
                        Gráficas
                    </a>
                </div>
            </div>
        </div>
    </div>
    <!-- Navbar -->
    <div id="productMainContainer1">
        <div id="productDescriptionContainer1">
            <div id="productTitle1">
                INTEGRACIÓN DE DATOS
            </div>
            <div id="productName1">
                <strong style="color: #ffc953;">CALCULADORA</strong> <strong style="color: #CA6994;">DE </strong>KPI<span style="color: black;">´</span>S
            </div>
            <div id="productDescriptionMain1">
                Por medio de la calculadora BiBa México <strong style="font-weight: bold;">integra o calcula la combinación de datos que necesites</strong>.
            </div>
        </div>
    </div>
    <!-- Descripción producto general -->
    <div id="productContainerItem1">
        <div id="productSubcontainerItem1">
            <div id="menuOptionDisplay1">
                <div id="productMenuOption1" style="border-left: none;">
                    Ingresa tus KPI´s por medio de nuestra base de datos y manipúlalos usando las trasnformaciones y operandos de la calculadora.
                </div>
            </div>
            <div id="displayProduct1">
                <!-- En este div se colocarán los diferentes productos con la función de action.js -->
                <div id="productTextContainer1">
                    <div style="width: 90%;height: 110px;padding: 10px; margin: 10px; display: flex; align-items: center; flex-direction: column; justify-content: space-around;">
                        <div id="individualProductTitle1">
                            Bases de datos:
                        </div>
                        <div style="padding-left: 15px; margin-right: 100px; border: 1px groove rgba(180,180,180,0.15); background-color: white; margin:0px;width: 300px;">
                            <div>
                                <select id="BD" class="searcher">
                                    
                                </select>
                            </div>
                        </div>
                    </div>
                    <div style="width: 90%;height: 110px;padding: 10px; margin: 10px; display: flex; align-items: center; flex-direction: column; justify-content: space-around;">
                        <div id="individualProductTitle1">
                            Estado:
                        </div>
                        <div style="padding-left: 15px; margin-right: 100px; border: 1px groove rgba(180,180,180,0.15); background-color: white; margin:0px;width: 300px;">
                            <div>
                                <select id="estadoMX" class="searcher">
                                    <option value="Pais">País (todos los estados)</option>
                                    <option value="Aguascalientes">Aguascalientes</option>
                                    <option value="Baja California">Baja California</option>
                                    <option value="Baja California Sur">Baja California Sur</option>
                                    <option value="Campeche">Campeche</option>
                                    <option value="Coahuila de Zaragoza">Coahuila de Zaragoza</option>
                                    <option value="Colima">Colima</option>
                                    <option value="Chiapas">Chiapas</option>
                                    <option value="Chihuahua">Chihuahua</option>
                                    <option value="Distrito Federal">Distrito Federal</option>
                                    <option value="Durango">Durango</option>
                                    <option value="Guanajuato">Guanajuato</option>
                                    <option value="Guerrero">Guerrero</option>
                                    <option value="Hidalgo">Hidalgo</option>
                                    <option value="Jalisco">Jalisco</option>
                                    <option value="Estado de Mexico">Estado de México</option>
                                    <option value="Michoacan">Michoacán</option>
                                    <option value="Morelos">Morelos</option>
                                    <option value="Nayarit">Nayarit</option>
                                    <option value="Nuevo Leon">Nuevo León</option>
                                    <option value="Oaxaca">Oaxaca</option>
                                    <option value="Puebla">Puebla</option>
                                    <option value="Queretaro">Querétaro</option>
                                    <option value="Quintana Roo">Quintana Roo</option>
                                    <option value="San Luis Potosi">San Luis Potosí</option>
                                    <option value="Sinaloa">Sinaloa</option>
                                    <option value="Sonora">Sonora</option>
                                    <option value="Tabasco">Tabasco</option>
                                    <option value="Tamaulipas">Tamaulipas</option>
                                    <option value="Tlaxcala">Tlaxcala</option>
                                    <option value="Veracruz">Veracruz</option>
                                    <option value="Yucatan">Yucatán</option>
                                    <option value="Zacatecas">Zacatecas</option>
                                </select>
                            </div>
                        </div>
                    </div>
                    <button id="botonFun2" onclick="borrar()">
                        BORRAR
                    </button>
                </div>
                <div id="standardMenu1">
                    <div style="width: 100%; height: 50px; font-family: OpenSansCondensed; font-size: 25px; color: #797979; display: flex; justify-content: center; align-items: center;">
                        HAGA OPERACIONES CON SUS KPI´S *
                    </div>
                    <p style="height: 50px; width: 90%; font-family: OpenSansCondensed; display: flex; align-items: center; border-bottom: #e2e2e2 solid 1px;">
                        <input type="text" id="operacionEnProceso" disabled="true" name="operacionEnProceso" placeholder="VARIABLES *" style="width: 90%; height: 40px; font-family: OpenSansCondensed; font-size: 18px; border: none; letter-spacing: 4px; padding-left: 2%;">&nbsp;&nbsp;<input type="submit" id="mandar_datos" name="mandar_datos" value="=" style="width: 10%; height: 40px; font-family: OpenSansCondensed; font-size: 18px; border: none; letter-spacing: 4px;">
                    </p>
                    <div style="width: 90%; height: 100px; display: flex; flex-direction: row; align-items: center; justify-content: space-around;">
                        <button class="mathButton" id="division">
                            ÷
                        </button>
                        <button class="mathButton" id="multiplicacion">
                            ×
                        </button>
                        <button class="mathButton" id="resta">
                            −
                        </button>
                        <button class="mathButton" id="suma">
                            +
                        </button>
                    </div>
                    <p style="height: 50px; width: 90%; font-family: OpenSansCondensed; display: flex; align-items: center; border-bottom: #e2e2e2 solid 1px;">
                        <div id="resultGraph">
                            POR EL MOMENTO NO PODEMOS HACER OPERACIONES CON MÁS DE 2 VARIABLES, VUELVA A INTRODUCIR SUS DATOS
                        </div>
                    </p>
                </div>
            </div>
            <!-- En este div se colocarán los diferentes productos con la función de action.js -->
        </div>
    </div>
    <!-- Descripción específica de producto -->
    <div id="calcuGraph">
        <div id="calcuGraphTitle">
            GRÁFICA RESULTANTE DE LA OPERACIÓN EFECUTADA
        </div>
        <div id="resultCalcu">
        
        </div>
        <div id="resultCalcu2">
        
        </div>
        <div id="resultCalcu3">
        
        </div>
    </div>
    <!-- Gráfica de resultados en la calculadora -->
    <div style="width: 100%; height: 112px;">
        <div style="width: 100%; height: 80px; background-color: #2D2D2D; display: flex; align-items: center; justify-content: flex-end;">
            <img src="img/LOGO_BLANCO_Alargado.png" alt="Logo Crea Proyectos" id="legalBarImage">
        </div>
        <div style="background-color: #0579C2; width: 100%; height: 1px;"></div>
        <div style="background-color: #0B4479; width: 100%; height: 1px;"></div>
        <div style="width: 100%; height: 60px; background-color: #171717; display: flex; align-items: center; justify-content: flex-start;">
            <div id="legalBarText">
                ©HACKATHON BBVA 2020 - {stay: ['home','inspired','coding']}
            </div>
        </div>
    </div>
    <!-- Legal Bar -->
    <div id="loader-wrapper">
        <span id="loader">
            <span id="loader-inner">
            </span>
        </span>
    </div>
    <script>
        async function oliwi(){
            var datos1 = Array();
            var datosBD = Array();

            await fetch('http://dc5be9ff7e53.ngrok.io/api/Indicadores/?g_espacio=ESTADO').then(res=> res.json()).then(datos =>{
                /*Esto es una promesa que agarra lo que viene de la API de una URL y luego al objeto JSON lo almacena 
                en*/
                console.log(datos);
                datos1 = datos
            });
            /*fetch es una promesa, javascript sigue trabajando y están los 3 estados, pendiente (then), error y ahuevo }
            si salió*/

            var prueba = new Array(datos1.length);
            console.log(prueba);
            //serie es el nombre del array donde se extrajeron los datos del json que uso para la graficación
            
            for(var j=0; j < datos1.length; j++){
                var i = datos1
                prueba[j] = [[`${datos1[j].nombre}`, `${datos1[j].fuente}`, `${datos1[j].g_espacio}`, Number.parseFloat(`${datos1[j].indicador_id}`)]];
            }
            
            datosBD=prueba;
            console.log(datosBD);
            console.log(datosBD.length);

            let div = '';
            var idBD = [];

            for (var i=0; i<datosBD.length; i++) {
                div += "<option value=" + datosBD[i][0][3] + ">" + datosBD[i][0][0] + "</option>" + "</br>";
                /*todo este codigo me lo copiara hacia mi archivo html y lo guardara en el
                div que tiene el id BD*/
                document.getElementById('BD').innerHTML = div;
            }
            console.log(div);
        }

        $(window).on("load", function(){
            $("#loader-wrapper").fadeOut("slow");
            oliwi();
        });
    </script>
    <!-- Loading efect -->
    <script type="text/javascript" src="javascript/graph.js"></script>
    <!-- CONEXIÓN CON DOCUMENTO DE EFECTOS JAVASCRIPT -->
</body>
</html>