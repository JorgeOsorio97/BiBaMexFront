<!DOCTYPE html>
<html lang="en">
<head>
    <meta name="description" content="Crea proyectos es una blabla">
    <!--Descripción del sitio-->
    <meta name="keywords" content="Crea Proyectos,aviso,privacidad">
    <!--Palabras clave-->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="css/style.css">
    <!--Conexión con hoja de estilos CSS-->
    <link rel="icon" href="img/LOGO_BLANCO.png" type="img" sizes="16x16">
    <!--Ícono del navegador-->
    <title>Crea Proyectos | Noticias</title>
    <!--Título de la página-->
    <script src="https://code.jquery.com/jquery-3.5.1.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
    <!--JQuery para el efecto de loading-->
    <!-- Required meta tags -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
     <!-- Graficos -->
     <script type="text/javascript">
        var contenido = document.querySelector('#contenido')
        var datos2 = Array()
        
        function traer(){
            fetch('https://mindicador.cl/api/dolar')
            .then(res=> res.json())
            .then(datos =>{
            tabla(datos)
            })
        }  

        function tabla(datos){
            var prueba = new Array(datos.serie.length)

            for(var j=0; j < datos.serie.length; j++)
            {
                var i = datos.serie
                prueba[j] = [[`${i[j].fecha}`, Number.parseFloat(`${i[j].valor}`)]];            
            }
            
            datos2=prueba
        } 
       
        function graficar()
        {
            //librerias para barras. 
            google.charts.load('current', {'packages':['bar']});
            google.charts.setOnLoadCallback(drawStuff);

            //grafica barras
            function drawStuff() {
                var data = new google.visualization.DataTable();
                //tipo de dato, y el dato
                data.addColumn('string', 'fecha');
                data.addColumn('number', 'valor');

                for(let i =0; i < datos2.length; i++)
                {
                data.addRow([datos2[i][0][0], datos2[i][0][1]]);
                }
                var options = {
                    chart: {
                        title: 'Company Performance',
                        subtitle: 'Sales, Expenses, and Profit: 2014-2017',
                    },
                    axes: {
                        x: {
                            0: { side: 'bottom', label: 'fecha'} // Top x-axis.
                        }
                    },
                        bar: { groupWidth: "70%" },
                };
            

            var chart = new google.charts.Bar(document.getElementById('top_x_div'));
            // Convert the Classic options to Material options.
            chart.draw(data, google.charts.Bar.convertOptions(options));
            };
        }

            
        function graficar2()
        {
            //librerias para lineas.
            google.charts.load('current', {'packages':['line']});
            google.charts.setOnLoadCallback(drawChart);

            //grafica de linea  
            function drawChart()
            {

            var data2 = new google.visualization.DataTable();
            data2.addColumn('string', 'fecha');
            data2.addColumn('number', 'valor');
            data2.addColumn('number', 'constante');

            for(let i =0; i < datos2.length; i++)
                    {
                    data2.addRow([datos2[i][0][0],datos2[i][0][1],780]);
                    }

            var options2 = 
            {
                chart: 
                {
                title: 'Box Office Earnings in First Two Weeks of Opening',
                subtitle: 'in millions of dollars (USD)'
                },
                
                axes: 
                {
                x: 
                {
                    0: {side: 'bottom'}
                }
                }
            };

            var chart = new google.charts.Line(document.getElementById('line_top_x'));
            chart.draw(data2, google.charts.Line.convertOptions(options2));
        }
        }

        function graficar3()
        {
        //librerias para barras con linea. 
        google.charts.load('current', {'packages':['corechart']});
        google.charts.setOnLoadCallback(drawVisualization);

        function drawVisualization() 
        {
            var data3 = new google.visualization.DataTable();
            data3.addColumn('string', 'fecha');
            data3.addColumn('number', 'valor');
            data3.addColumn('number', 'constante');
            data3.addColumn('number', 'constante');
            data3.addColumn('number', 'constante');


            for(let i =0; i < datos2.length; i++)
                    {
                    data3.addRow([datos2[i][0][0],datos2[i][0][1],780, 500, 200]);
                    }

            var options3 = {
            title : 'Monthly Coffee Production by Country',
            vAxis: {title: 'Cups'},
            hAxis: {title: 'Month'},
            seriesType: 'bars',
            series: {1: {type: 'line'}, 2: {type: 'line'}},

         
            };


            var chart = new google.visualization.ComboChart(document.getElementById('chart_div'));
            chart.draw(data3, options3);
        }
        }
        
        function graficar4()
        {
        //librerias para areas
        google.charts.load('current', {'packages':['corechart']});
        google.charts.setOnLoadCallback(drawChart);

        function drawChart() 
        {
            var data4 = new google.visualization.DataTable();
            data4.addColumn('string', 'fecha');
            data4.addColumn('number', 'valor');
            data4.addColumn('number', 'constante');

            for(let i =0; i < datos2.length; i++)
                    {
                    data4.addRow([datos2[i][0][0],datos2[i][0][1],580]);
                    }

            var options4 = 
            {
            title: 'Company Performance',
            hAxis: {title: 'Year',  titleTextStyle: {color: '#333'}},
            vAxis: {minValue: 0}
            };

            var chart = new google.visualization.AreaChart(document.getElementById('chart_div2'));
            chart.draw(data4, options4);
        }
        }

        function graficar5()
        {
        google.charts.load('current', {'packages':['corechart']});
        google.charts.setOnLoadCallback(drawChart);

        function drawChart() {
            var data5 = new google.visualization.DataTable();
                data5.addColumn('string', 'fecha');
                data5.addColumn('number', 'valor');

                for(let i =0; i < datos2.length; i++)
                        {
                        data5.addRow([datos2[i][0][0],datos2[i][0][1]]);
                        }        

                var options5 = {
                title: 'My Daily Activities'
                };
                var chart = new google.visualization.PieChart(document.getElementById('piechart'));
                chart.draw(data5, options5);
            }
        }
    </script>
</head>
<body>
    <div id="navbar-container">
        <div id="navbar">
            <div >
                <div onclick="displayMenuMobile()" id="navbarMiniMenu">
                    <img src="img/menu.svg" alt="menuMobile" width="100%">
                </div>
                <div id="navbarMenu">
                    <a href="index.html" class="menuButton2">
                        Inicio
                    </a>
                    <a href="calculadoraGraficadora.html" class="menuButton2">
                        Calculadora/Graficadora
                    </a>
                    <a href="heatmap.html" class="menuButton2" >
                        Heatmap
                    </a>
                    <a href="graficas.html" id="menuButton1">
                        Gráficas
                    </a>
                </div>
            </div>
            
        </div>
    </div>
    <!-- Navbar -->
    <div class="sidebar">
        <!-- Checkbox de graficas CHECAR CON BACKEND-->
      
        <form class="form-group">
            <div >
                <select class="custom-select" name="database">
                    <!--Select me sirve para hacer una lista de opciones multiples, cada
                    una con su respectivo nombre y value-->
                    <!--El name sirve para que al darme un resultado me salga
                    el nombre de mi select = el value de mi opcion-->
                      <option value="1">Inflacion</option>
                      <option value="2">TIIE</option>
                      <option value="3">CNBV</option>
                      <option value="4">Composición de la población económicamente activa</option>
                </select>
                 <!--Como en el checkbox se pueden seleccionar varias opciones, se debe
                dar un name diferente a cada checkbox-->
                <input type="checkbox" name="grafica" value="barras"/>
                <label for="grafica">Gráfica de barras</label>
    
                <input type="checkbox" name="grafica" value="linea"/>
                <label for="grafica">Gráfica de línea</label>
    
                <input type="checkbox" name="grafica" value="barraslineas"/>
                <label for="grafica">Gráfica de barras con líneas</label>
    
                <input type="checkbox" name="grafica" value="area"/>
                <label for="grafica">Gráfica de área</label>
    
                <input type="checkbox" name="grafica" value="pie"/>
                <label for="grafica">Gráfica de pie</label>
                
                <div class="btn-group-toggle" data-toggle="buttons">
                    <label class="btn btn-secondary active">
                        <input  type="checkbox" onclick="aldarclic()"> Checked
                    </label>
                </div>

                <script>
                    function aldarclic()
                    {
                        const checkboxes = document.querySelectorAll('input[name="grafica"]:checked');
                        let arreglocharts = [];
                        checkboxes.forEach((checkbox) => {
                            arreglocharts.push(checkbox.value);
                        });
                        traer();

                        switch(arreglocharts[0])
                        {
                            case 'barras':  graficar();break;
                            case 'linea': graficar2();break;
                            case 'barraslineas': graficar3(); break;
                            case 'area': graficar4(); break;
                            case 'pie':  graficar5();break;
                        }
                       
                    }
                    
                </script>
               
                    <!-- <input type="submit"/> -->
                    <!--Se debe poner un input de submit para que me envie los resultados
                    estos saldran en el url-->
                </div>
                
        </form>
        
    </div>

    <div >
        <div class="grid-graphs" >
            <!--grafica de barras-->
            <div class="content box" id="top_x_div" ></div>
            <!--grafica de lineas-->
            <div class="content box" id="line_top_x"></div>
            <!--grafica de barras con lineas-->
            <div class="content box" id="chart_div"></div>
             <!-- grafica pie-->     
             <div class="content box" id="piechart"></div>
            <!-- grafica de area-->    
            <div class="content" id="chart_div2" ></div>
           
            
        </div>

    </div>

   
        
    <div style="width: 100%; height: 112px;">
        <div style="width: 100%; height: 80px; background-color: #2D2D2D; display: flex; align-items: center; justify-content: flex-end;">
            <img src="img/LOGO_BLANCO_Alargado.png" alt="Logo Crea Proyectos" id="legalBarImage">
        </div>

        <div style="background-color: #0579C2; width: 100%; height: 1px;"></div>
        <div style="background-color: #0B4479; width: 100%; height: 1px;"></div>
        <div style="width: 100%; height: 60px; background-color: #171717; display: flex; align-items: center; justify-content: flex-start;">
            <div id="legalBarText">
                ©HACKATHON BBVA 2020 - {stay: ['home','inspired','coding']}
            </div>
        </div>
    </div>
    <!-- Legal Bar -->
    <div id="loader-wrapper">
        <span id="loader">
            <span id="loader-inner"></span>
        </span>
    </div>
    <script>
        $(window).on("load", function(){
            $("#loader-wrapper").fadeOut("slow");
        });
    </script>
    <!-- Loading efect -->
    <script type="text/javascript" src="javascript/mexico_map.js"></script>
    <!-- CONEXIÓN CON DOCUMENTO DE EFECTOS JAVASCRIPT -->
    <script type="text/javascript" src="javascript/action.js"></script>
    <!-- CONEXIÓN CON DOCUMENTO DE EFECTOS JAVASCRIPT -->
</body>
</html>