<!DOCTYPE html>
<html lang="en">
<head>
    <meta name="description" content="Crea proyectos es una blabla">
    <!--Descripción del sitio-->
    <meta name="keywords" content="Crea Proyectos,aviso,privacidad">
    <!--Palabras clave-->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="css/style.css">
    <!--Conexión con hoja de estilos CSS-->
    <link rel="icon" href="img/LOGO_BLANCO.png" type="img" sizes="16x16">
    <!--Ícono del navegador-->
    <title>Productos Crea Proyectos | ACO Coladera de Baño</title>
    <!--Título de la página-->
    <script src="https://code.jquery.com/jquery-3.5.1.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
    <!--JQuery para el efecto de loading-->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
</head>
<body>
    <div id="navbar-container"> 
        <div id="navbar">
            <div id="navbarLogo">
                <a href="index.html"><img src="img/LOGO.png" alt="Logo BibaMexico" width="100%"></a>
            </div>
            <div >
                <div onclick="displayMenuMobile()" id="navbarMiniMenu">
                    <img src="img/menu.svg" alt="menuMobile" width="100%">
                </div>
                <div id="navbarMenu">
                    <a href="index.html" class="menuButton2" style="text-decoration: none; height: 100%;">
                        Inicio
                    </a>
                    <a href="calculadoraGraficadora.html" class="menuButton2" style="text-decoration: none; height: 100%;">
                        Calculadora/Graficadora
                    </a>
                    <a href="heatmap.html" class="menuButton2" style="text-decoration: none; height: 100%;">
                        Heatmap
                    </a>
                    <a href="graficas.html" id="menuButton1" style="text-decoration: none; height: 100%;">
                        Gráficas
                    </a>
                </div>
                <!-- Mau es un pinche tonto -->
            </div>
        </div>
    </div>
    <!-- Navbar -->
    <div id="productMainContainer3">
        <div id="productDescriptionContainer1">
            <div id="productTitle1">
                INTEGRACIÓN DE DATOS
            </div>
            <div id="productName4">
                GRAFICADORA
            </div>
            <div id="productDescriptionMain1">
                Por medio de la graficadora BiBaMéxico <strong style="font-weight: bold;">usted puede visualizar a la par las bases de datos que necesite a través del tiempo</strong>  para ayudarle a realizar toma de decisión oportuna.
            </div>
        </div>
        <!-- Barra lateral -->
        <div class="sidebar">
            <!-- Checkbox de graficas CHECAR CON BACKEND-->      
            <form class="form-group">
                <div >
                <select class="custom-select" name="database" style="margin-bottom: 5%;">
                    <!--Select me sirve para hacer una lista de opciones multiples, cada
                    una con su respectivo nombre y value-->
                    <!--El name sirve para que al darme un resultado me salga
                    el nombre de mi select = el value de mi opcion-->
                    <option value="1">Inflacion</option>
                    <option value="2">TIIE</option>
                    <option value="3">CNBV</option>
                    <option value="4">Composición de la población económicamente activa</option>
                </select>
                <!--Como en el checkbox se pueden seleccionar varias opciones, se debe
                dar un name diferente a cada checkbox-->
                
                <label for="barras" style="display: block;">
                    <input type="checkbox" name="grafica" style="margin-left: 5%;" onclick="graficar()"/>
                    Gráfica de barras
                </label>

                <label for="barras" style="display: block;">
                    <input type="checkbox" name="grafica" style="margin-left: 5%;" onclick="graficar2()"/>
                    Gráfica de línea
                </label>

                <label for="barras" style="display: block;">
                    <input type="checkbox" name="grafica" style="margin-left: 5%;" onclick="graficar3()"/>
                    Gráfica de barras con líneas
                </label>

                <label for="barras" style="display: block;">
                    <input type="checkbox" name="grafica" style="margin-left: 5%;" onclick="graficar4()"/>
                    Gráfica de área
                </label>

                <label for="barras" style="display: block;">
                    <input type="checkbox" name="grafica" style="margin-left: 5%;" onclick="graficar5()"/>
                    Gráfica de pie
                </label>
                
                <div class="btn-group-toggle" data-toggle="buttons">
                    <label class="btn btn-secondary active" style="width: 90%; margin: 5%;">
                        <input type="checkbox" onclick="traer()"> Checked
                    </label>  
                </div>
                    <!-- <input type="submit"/> -->
                    <!--Se debe poner un input de submit para que me envie los resultados
                    estos saldran en el url-->
                </div> 
            </form>
        </div>
    </div>
    
    <div style="background-color: blue;">
        <div id="graphCatalogue">
            <!--grafica de barras-->
            <div id="top_x_div" style="margin-left: 25%; margin-right: 10%; background-color: white; width: 70%; height: 300px;"></div>
            <!--grafica de lineas-->
            <div id="line_top_x" style="margin-left: 25%; margin-right: 10%; background-color: white; width: 70%; height: 300px;"></div>
            <!--grafica de barras con lineas-->
            <div id="chart_div" style="margin-left: 25%; margin-right: 10%; background-color: white; width: 70%; height: 300px;"></div>
            <!-- grafica de area-->    
            <div id="chart_div2" style="margin-left: 25%; margin-right: 10%; background-color: white; width: 70%; height: 300px;"></div>
            <!-- grafica pie-->     
            <div id="piechart" style="margin-left: 25%; margin-right: 10%; background-color: white; width: 70%; height: 300px;"></div>
        </div>
    </div>
    <!-- Display para las gráficas -->

    <div style="width: 100%; height: 112px;">
        <div style="width: 100%; height: 80px; background-color: #2D2D2D; display: flex; align-items: center; justify-content: flex-end;">
            <img src="img/LOGO_BLANCO_Alargado.png" alt="Logo Crea Proyectos" id="legalBarImage">
        </div>
        <div style="background-color: #0579C2; width: 100%; height: 1px;"></div>
        <div style="background-color: #0B4479; width: 100%; height: 1px;"></div>
        <div style="width: 100%; height: 60px; background-color: #171717; display: flex; align-items: center; justify-content: flex-start;">
            <div id="legalBarText">
                ©HACKATHON BBVA 2020 - {stay: ['home','inspired','coding']}
            </div>
        </div>
    </div>
    <!-- Legal Bar -->
    
    <div id="loader-wrapper">
        <span id="loader">
            <span id="loader-inner">
            </span>
        </span>
    </div>
    <script>
        $(window).on("load", function(){
            $("#loader-wrapper").fadeOut("slow");
        });
    </script>
    <!-- Loading efect -->

    <!-- Creación de gráficas con google charts -->
    <script>
        var contenido = document.querySelector('#contenido')
        var datos2 = Array()
        
        function traer(){
            fetch('https://mindicador.cl/api/dolar')
            .then(res=> res.json())
            .then(datos =>{
            tabla(datos)
            })
        }  

        function tabla(datos){
            var prueba = new Array(datos.serie.length)

            for(var j=0; j < datos.serie.length; j++)
            {
                var i = datos.serie
                prueba[j] = [[`${i[j].fecha}`, Number.parseFloat(`${i[j].valor}`)]];            
            }
            
            datos2=prueba
        } 
        
        function graficar()
        {
            //librerias para barras. 
            google.charts.load('current', {'packages':['bar']});
            google.charts.setOnLoadCallback(drawStuff);

            //grafica barras
            function drawStuff() {

                //console.log(Number.parseFloat(datos2[1][0][1]))

                var data = new google.visualization.DataTable();
                //tipo de dato, y el dato
                data.addColumn('string', 'fecha');
                data.addColumn('number', 'valor');

                for(let i =0; i < datos2.length; i++)
                {
                data.addRow([datos2[i][0][0], datos2[i][0][1]]);
                }
                var options = {
                    chart: {
                        title: 'Company Performance',
                        subtitle: 'Sales, Expenses, and Profit: 2014-2017',
                    },
                    axes: {
                        x: {
                            0: { side: 'bottom', label: 'fecha'} // Top x-axis.
                        }
                    },
                        bar: { groupWidth: "70%" },
                };
            

            var chart = new google.charts.Bar(document.getElementById('top_x_div'));
            // Convert the Classic options to Material options.
            chart.draw(data, google.charts.Bar.convertOptions(options));
            };
        }

            
        function graficar2()
        {
            //librerias para lineas.
            google.charts.load('current', {'packages':['line']});
            google.charts.setOnLoadCallback(drawChart);

            //grafica de linea  
            function drawChart()
            {

            var data2 = new google.visualization.DataTable();
            data2.addColumn('string', 'fecha');
            data2.addColumn('number', 'valor');
            data2.addColumn('number', 'constante');

            for(let i =0; i < datos2.length; i++)
                    {
                    data2.addRow([datos2[i][0][0],datos2[i][0][1],780]);
                    }

            var options2 = 
            {
                chart: 
                {
                title: 'Box Office Earnings in First Two Weeks of Opening',
                subtitle: 'in millions of dollars (USD)'
                },
                
                axes: 
                {
                x: 
                {
                    0: {side: 'bottom'}
                }
                }
            };

            var chart = new google.charts.Line(document.getElementById('line_top_x'));
            chart.draw(data2, google.charts.Line.convertOptions(options2));
        }
        }

        function graficar3()
        {
        //librerias para barras con linea. 
        google.charts.load('current', {'packages':['corechart']});
        google.charts.setOnLoadCallback(drawVisualization);

        function drawVisualization() 
        {
            var data3 = new google.visualization.DataTable();
            data3.addColumn('string', 'fecha');
            data3.addColumn('number', 'valor');
            data3.addColumn('number', 'constante');
            data3.addColumn('number', 'constante');
            data3.addColumn('number', 'constante');


            for(let i =0; i < datos2.length; i++)
                    {
                    data3.addRow([datos2[i][0][0],datos2[i][0][1],780, 500, 200]);
                    }

            var options3 = {
            title : 'Monthly Coffee Production by Country',
            vAxis: {title: 'Cups'},
            hAxis: {title: 'Month'},
            seriesType: 'bars',
            series: {1: {type: 'line'}, 2: {type: 'line'}},

         
            };


            var chart = new google.visualization.ComboChart(document.getElementById('chart_div'));
            chart.draw(data3, options3);
        }
        }
        
        function graficar4()
        {
        //librerias para areas
        google.charts.load('current', {'packages':['corechart']});
        google.charts.setOnLoadCallback(drawChart);

        function drawChart() 
        {
            var data4 = new google.visualization.DataTable();
            data4.addColumn('string', 'fecha');
            data4.addColumn('number', 'valor');
            data4.addColumn('number', 'constante');

            for(let i =0; i < datos2.length; i++)
                    {
                    data4.addRow([datos2[i][0][0],datos2[i][0][1],580]);
                    }

            var options4 = 
            {
            title: 'Company Performance',
            hAxis: {title: 'Year',  titleTextStyle: {color: '#333'}},
            vAxis: {minValue: 0}
            };

            var chart = new google.visualization.AreaChart(document.getElementById('chart_div2'));
            chart.draw(data4, options4);
        }
        }

        function graficar5()
        {
        google.charts.load('current', {'packages':['corechart']});
        google.charts.setOnLoadCallback(drawChart);

        function drawChart() {
            var data5 = new google.visualization.DataTable();
                data5.addColumn('string', 'fecha');
                data5.addColumn('number', 'valor');

                for(let i =0; i < datos2.length; i++)
                        {
                        data5.addRow([datos2[i][0][0],datos2[i][0][1]]);
                        }        

                var options5 = {
                title: 'My Daily Activities'
                };
                var chart = new google.visualization.PieChart(document.getElementById('piechart').style.backgroundColor='transparent');
                chart.draw(data5, options5);
            }
        }
    </script>
    <!-- Creación de gráficas con google charts -->

    <script type="text/javascript" src="javascript/action.js"></script>
    <!-- CONEXIÓN CON DOCUMENTO DE EFECTOS JAVASCRIPT -->
</body>
</html>